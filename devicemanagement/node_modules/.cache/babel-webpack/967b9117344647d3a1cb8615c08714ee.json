{"ast":null,"code":"import { Users } from 'src/app/shared/users.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/users.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction UsersComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" UPDATE \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsersComponent_ng_template_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"CREATE\");\n  }\n}\n\nfunction UsersComponent_tr_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\", 16);\n    i0.ɵɵlistener(\"click\", function UsersComponent_tr_36_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const usr_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.onSelect(usr_r8);\n    });\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelementStart(8, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function UsersComponent_tr_36_Template_button_click_8_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const usr_r8 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.remove($event, usr_r8);\n    });\n    i0.ɵɵtext(9, \"X\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const usr_r8 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"selected\", ctx_r7.user === usr_r8);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(usr_r8.userName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(usr_r8.userRole);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(usr_r8.userLocation);\n  }\n}\n\nexport let UsersComponent = /*#__PURE__*/(() => {\n  class UsersComponent {\n    constructor(service, toastr) {\n      this.service = service;\n      this.toastr = toastr;\n      this.user = new Users();\n      this.users = [];\n      this.isEdit = false;\n    }\n\n    ngOnInit() {\n      this.get();\n    }\n\n    onSubmit() {\n      if (this.isEdit) this.updateUser();else this.addUser();\n    }\n\n    addUser() {\n      this.service.postUser(this.user).subscribe(res => {\n        this.resetForm();\n        this.toastr.success('Submitted successfully', 'Users register');\n        this.get();\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    updateUser() {\n      this.service.putUser(this.user).subscribe(res => {\n        this.resetForm();\n        this.toastr.success('Submitted successfully', 'Users register');\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    resetForm() {\n      this.user = new Users();\n      this.isEdit = false;\n    }\n\n    get() {\n      this.service.getAll().subscribe(res => {\n        this.users = res;\n      }, err => {\n        this.toastr.error('Users couldnt be load');\n      });\n    }\n\n    onSelect(usr) {\n      this.user = usr;\n      this.isEdit = true;\n    }\n\n    remove(event, usr) {\n      event.stopPropagation();\n      var r = confirm(\"Do you want to delete the user?\");\n\n      if (r == false) {\n        return;\n      }\n\n      this.service.deleteUser(usr.userId).subscribe(res => {\n        this.users = this.users.filter(obj => obj !== usr);\n        this.toastr.success('Deleted successfully');\n      }, err => {\n        this.toastr.error('User couldnt be deleted');\n      });\n    }\n\n  }\n\n  UsersComponent.ɵfac = function UsersComponent_Factory(t) {\n    return new (t || UsersComponent)(i0.ɵɵdirectiveInject(i1.UsersService), i0.ɵɵdirectiveInject(i2.ToastrService));\n  };\n\n  UsersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UsersComponent,\n    selectors: [[\"app-users\"]],\n    decls: 37,\n    vars: 8,\n    consts: [[\"novalidate\", \"\", 3, \"submit\"], [\"form\", \"ngForm\"], [\"type\", \"hidden\", \"name\", \"userId\", 3, \"value\"], [1, \"form-group\"], [\"placeholder\", \"Username\", \"name\", \"userName\", \"required\", \"\", \"maxlength\", \"50\", 1, \"form-control\", \"form-control-lg\", 3, \"ngModel\", \"ngModelChange\"], [\"userName\", \"ngModel\"], [\"placeholder\", \"Role\", \"name\", \"userRole\", \"required\", \"\", \"maxlength\", \"25\", 1, \"form-control\", \"form-control-lg\", 3, \"ngModel\", \"ngModelChange\"], [\"userRole\", \"ngModel\"], [\"placeholder\", \"Location\", \"name\", \"userLocation\", \"required\", \"\", \"maxlength\", \"50\", 1, \"form-control\", \"form-control-lg\", 3, \"ngModel\", \"ngModelChange\"], [\"userLocation\", \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-info\", \"btn-lg\", \"btn-block\", 3, \"disabled\"], [4, \"ngIf\", \"ngIfElse\"], [\"create\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\", \"btn-lg\", \"btn-block\", 3, \"click\"], [1, \"table\", \"table-hover\"], [3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"]],\n    template: function UsersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0, 1);\n        i0.ɵɵlistener(\"submit\", function UsersComponent_Template_form_submit_0_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelement(2, \"input\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"label\");\n        i0.ɵɵtext(5, \"User Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"input\", 4, 5);\n        i0.ɵɵlistener(\"ngModelChange\", function UsersComponent_Template_input_ngModelChange_6_listener($event) {\n          return ctx.user.userName = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 3);\n        i0.ɵɵelementStart(9, \"label\");\n        i0.ɵɵtext(10, \"User Role\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"input\", 6, 7);\n        i0.ɵɵlistener(\"ngModelChange\", function UsersComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.user.userRole = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 3);\n        i0.ɵɵelementStart(14, \"label\");\n        i0.ɵɵtext(15, \"User Location\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 8, 9);\n        i0.ɵɵlistener(\"ngModelChange\", function UsersComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.user.userLocation = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 3);\n        i0.ɵɵelementStart(19, \"button\", 10);\n        i0.ɵɵtemplate(20, UsersComponent_div_20_Template, 2, 0, \"div\", 11);\n        i0.ɵɵtemplate(21, UsersComponent_ng_template_21_Template, 1, 0, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function UsersComponent_Template_button_click_23_listener() {\n          return ctx.resetForm();\n        });\n        i0.ɵɵtext(24, \"NEW\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"table\", 14);\n        i0.ɵɵelementStart(26, \"thead\");\n        i0.ɵɵelementStart(27, \"tr\");\n        i0.ɵɵelementStart(28, \"th\");\n        i0.ɵɵtext(29, \"User Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\");\n        i0.ɵɵtext(31, \"User Role\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"th\");\n        i0.ɵɵtext(33, \"Location\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"th\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"tbody\");\n        i0.ɵɵtemplate(36, UsersComponent_tr_36_Template, 10, 5, \"tr\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(1);\n\n        const _r5 = i0.ɵɵreference(22);\n\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", ctx.user.userId);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.userName);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.userRole);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.userLocation);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", _r0.invalid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isEdit)(\"ngIfElse\", _r5);\n        i0.ɵɵadvance(16);\n        i0.ɵɵproperty(\"ngForOf\", ctx.users);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i3.RequiredValidator, i3.MaxLengthValidator, i3.NgControlStatus, i3.NgModel, i4.NgIf, i4.NgForOf],\n    encapsulation: 2\n  });\n  return UsersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}